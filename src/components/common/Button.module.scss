@use '@/styles/variables' as vars;
@use '@/styles/mixins' as mixins;

//*-------------------- Base (consomme des variables CSS):
// - Les variants définissent les tokens (--btn-*) ci-dessous
// - ⚠️ Aucun "look" final ici : juste la structure + états génériques

.button {
  //* Tokens par defaut (serviront de fallback si pas de variante):
  //-------------------- Tokens de tailles (défault "touch-safe":
  --btn-min-height: 44px; // hauteur minimale par défaut
  --btn-padding-x: 16px; // padding horizontale
  --btn-font-size: 16px; // taille de police

  //-------------------- Tokens visuels:
  --btn-text: #{vars.$color-coldgrey-4};
  --btn-text-hover: #{vars.$color-coldgrey-2};
  --btn-border: #{vars.$color-coldgrey-12};
  --btn-bg: #{vars.$color-coldgrey-10};
  --btn-bg-hover: var(--btn-bg); // par défaut, identique
  --btn-bg-active: var(--btn-bg);
  --btn-shadow: 0 4px 3px 1px #{vars.$color-coldgrey-8},
    0 6px 8px #{vars.$color-coldgrey-9}, 0 -4px 4px #{vars.$color-coldgrey-9},
    0 -6px 4px #{vars.$color-coldgrey-8},
    inset 0 0 3px #{vars.$color-coldgrey-9};
  --btn-shadow-hover: var(--btn-shadow);
  --btn-shadow-active: var(--btn-shadow);

  //-------------------- Structure commune:
  position: relative;
  min-width: 44px; // Cible tactile
  min-height: var(--btn-min-height);
  padding: 0 var(--btn-padding-x);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--btn-text);
  font-weight: 500;
  text-shadow: 0px -1px 1px vars.$color-coldgrey-12;
  white-space: nowrap;
  border: 1px solid var(--btn-border);
  border-radius: 32px;
  background: var(--btn-bg);
  box-shadow: var(--btn-shadow);
  cursor: pointer;
  user-select: none;

  /* Cible UNIQUEMENT le contenu (cf. <span className={styles.content}> dans Button.tsx */
  .content {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  /* Effets "motion-safe" : animés seulement si l’utilisateur n’a PAS demandé
     de réduire les animations dans son OS (accessibilité + perf) */
  @media (prefers-reduced-motion: no-preference) {
    transition: background-color 0.2s ease, color 0.2s ease,
      border-color 0.2s ease, box-shadow 0.2s ease, transform 0.06s ease;
    .content {
      transition: transform 0.2s ease;
    }
  }
  /* Hover seulement si l’appareil supporte le survol (desktop).
     Évite les états collants sur mobile (UX) */
  @media (hover: hover) {
    &:hover {
      color: var(--btn-text-hover);
      background: var(--btn-bg-hover);
      box-shadow: var(--btn-shadow-hover);
    }
  }
  /* Actif : léger enfoncement (feedback tactile) */
  &:active {
    background: var(--btn-bg-active);
    box-shadow: var(--btn-shadow-active);
  }
  /* Focus clavier visible (a11y) */
  &:focus-visible {
    outline: 2px solid vars.$color-coldgrey-2;
    outline-offset: 2px;
  }
  /* États désactivés (boutons & liens)
     - :disabled => vrai <button disabled>
     - [aria-disabled="true"] => <a> “désactivé” annoncé aux lecteurs d’écran
     - On NE met PAS pointer-events:none pour conserver le focus clavier */
  &:disabled,
  &[aria-disabled='true'] {
    opacity: 0.6;
    cursor: not-allowed;
  }
}

//*-------------------- Variant: HEADER (CTA du Header):
.v_header {
  --btn-min-height: 48px;
  --btn-padding-x: 32px;
  --btn-text: #{vars.$color-coldgrey-4};
  font-weight: 600;
  text-shadow: 0px -1px 2px vars.$color-coldgrey-12;
  --btn-text-hover: #{vars.$color-coldgrey-3};

  --btn-bg: linear-gradient(
    to top,
    #{vars.$color-coldgrey-10} 0%,
    #{vars.$color-coldgrey-8} 80%
  );
  --btn-shadow: 0 4px 3px 1px #{vars.$color-coldgrey-9},
    0 6px 8px #{vars.$color-coldgrey-10}, 0 -4px 4px #{vars.$color-coldgrey-10},
    0 -6px 4px #{vars.$color-coldgrey-9},
    inset 0 0 3px #{vars.$color-coldgrey-10};

  --btn-shadow-hover: 0 4px 3px #{vars.$color-coldgrey-9},
    0 6px 8px #{vars.$color-coldgrey-10}, 0 -4px 4px #{vars.$color-coldgrey-10},
    0 -6px 4px #{vars.$color-coldgrey-9},
    inset 0 0 3px 3px #{vars.$color-coldgrey-10};

  --btn-shadow-active: 0 4px 3px #{vars.$color-coldgrey-9},
    0 6px 8px #{vars.$color-coldgrey-10}, 0 -4px 4px #{vars.$color-coldgrey-10},
    0 -6px 4px #{vars.$color-coldgrey-9},
    inset 0 0 5px 3px #{vars.$color-coldgrey-11},
    inset 0 0 30px #{vars.$color-coldgrey-11};
}

//*-------------------- Variant: NAV (panneau BurgerMenu):
.button.v_nav {
  width: 100%;
  --btn-min-height: 48px;
  --btn-padding-x: 16px;
  --btn-bg: linear-gradient(
    to top,
    #{vars.$color-coldgrey-9} 0%,
    #{vars.$color-coldgrey-7} 80%,
    #{vars.$color-coldgrey-8} 100%
  );
  --btn-bg-active: linear-gradient(
    to top,
    #{vars.$color-coldgrey-10} 0%,
    #{vars.$color-coldgrey-8} 80%,
    #{vars.$color-coldgrey-9} 100%
  );
  --btn-shadow: 0 4px 3px 1px #{vars.$color-coldgrey-8},
    0 6px 8px #{vars.$color-coldgrey-9}, 0 -4px 4px #{vars.$color-coldgrey-9},
    0 -6px 4px #{vars.$color-coldgrey-8},
    inset 0 0 3px #{vars.$color-coldgrey-9};
  --btn-shadow-hover: 0 4px 3px #{vars.$color-coldgrey-8},
    0 6px 8px #{vars.$color-coldgrey-9}, 0 -4px 4px #{vars.$color-coldgrey-9},
    0 -6px 4px #{vars.$color-coldgrey-8},
    inset 0 0 3px 3px #{vars.$color-coldgrey-9};
  --btn-shadow-active: 0 4px 3px #{vars.$color-coldgrey-8},
    0 6px 8px #{vars.$color-coldgrey-9}, 0 -4px 4px #{vars.$color-coldgrey-9},
    0 -6px 4px #{vars.$color-coldgrey-8},
    inset 0 0 5px 3px #{vars.$color-coldgrey-11},
    inset 0 0 30px #{vars.$color-coldgrey-11};
  /*------------------ Mobile Large ------------------*/
  @media screen and (min-width: 498px) {
    width: 250px;
  }
}
